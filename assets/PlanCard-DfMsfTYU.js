import{j as e,W as j,G as y,a as I,l as z,c as N}from"./index-DZW4yAKh.js";import{r as b,X as $,u as E,v as Y,b as k,Y as p,e as S,T as U,l as C,m as M,f as v,G as R,E as P,N as F,g as G,q as _,B as W,p as q,o as B}from"./ui-DVQGuqmb.js";import{a as D}from"./vendor-gH-7aFTg.js";var A=D();const V=({photos:t,isOpen:s,onClose:l,initialIndex:c=0,placeName:d=""})=>{const[o,u]=b.useState(c);b.useEffect(()=>{s&&u(c)},[s,c]),b.useEffect(()=>{const i=n=>{if(s)switch(n.key){case"Escape":l();break;case"ArrowLeft":h();break;case"ArrowRight":m();break}};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[s,o,t.length]);const m=()=>{u(i=>(i+1)%t.length)},h=()=>{u(i=>(i-1+t.length)%t.length)};return!s||t.length===0?null:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:l,className:"absolute top-4 right-4 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"닫기",children:e.jsx($,{className:"w-6 h-6 text-white"})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:h,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"이전 사진",children:e.jsx(E,{className:"w-6 h-6 text-white"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:m,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"다음 사진",children:e.jsx(Y,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center max-w-7xl max-h-full p-4",children:[e.jsx("div",{className:"relative mb-4",children:e.jsx("img",{src:t[o],alt:`${d} 사진 ${o+1}`,className:"max-w-full max-h-[80vh] object-contain rounded-xl shadow-2xl"})}),e.jsx(y,{variant:"light",className:"max-w-md",children:e.jsxs("div",{className:"text-center space-y-2",children:[d&&e.jsx("h3",{className:"text-lg font-semibold text-white",children:d}),e.jsx("div",{className:"flex items-center justify-center space-x-4 text-white/70 text-sm",children:e.jsxs("span",{children:[o+1," / ",t.length]})}),t.length>1&&e.jsx("div",{className:"flex justify-center space-x-2 mt-4 overflow-x-auto max-w-full",children:t.map((i,n)=>e.jsx("button",{onClick:()=>u(n),className:`relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden transition-all ${n===o?"ring-2 ring-primary-400 scale-110":"opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:i,alt:`썸네일 ${n+1}`,className:"w-full h-full object-cover"})},n))})]})})]}),e.jsx("div",{className:"absolute inset-0 -z-10",onClick:l})]})},L=t=>{try{const s=new URL(t);let l=null;if(s.hostname==="youtu.be"?l=s.pathname.slice(1):(s.hostname==="www.youtube.com"||s.hostname==="youtube.com")&&(s.pathname==="/watch"?l=s.searchParams.get("v"):s.pathname.startsWith("/embed/")?l=s.pathname.slice(7):s.pathname.startsWith("/v/")&&(l=s.pathname.slice(3))),l){const c=s.searchParams.get("t")||s.searchParams.get("start");let d="";if(c){const o=parseInt(c.replace(/[^\d]/g,""));isNaN(o)||(d=`?start=${o}`)}return`https://www.youtube.com/embed/${l}${d}`}return null}catch(s){return console.error("Invalid YouTube URL:",s),null}},K=t=>{const s=L(t);if(s){const l=s.match(/\/embed\/([^?]+)/);return l?l[1]:null}return null},T=(t,s="medium")=>{const l=K(t);return l?`https://img.youtube.com/vi/${l}/${s}default.jpg`:null},X=({url:t,title:s,className:l="",onClose:c})=>{const d=I(),{tripId:o}=z(),[u,m]=b.useState(!1),[h,i]=b.useState(!1),n=L(t),x=T(t,"maxres")||T(t,"high");if(!n)return e.jsx("div",{className:`text-red-400 text-sm ${l}`,children:"유효하지 않은 유튜브 URL입니다."});const g=a=>{a.stopPropagation(),a.preventDefault(),m(!0)},f=a=>{a.stopPropagation(),a.preventDefault(),i(!0)},r=a=>{a&&(a.stopPropagation(),a.preventDefault()),m(!1),c?c():o&&d(`/trips/${o}`)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`relative group cursor-pointer ${l}`,"data-youtube-embed":!0,children:x?e.jsxs("div",{className:"relative youtube-thumbnail",children:[e.jsx("img",{src:x,alt:s||"유튜브 비디오",className:"w-full aspect-video object-cover rounded-lg transition-transform group-hover:scale-105",onClick:g}),e.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity youtube-play-button",onClick:g,children:e.jsx("div",{className:"bg-red-600 rounded-full p-3",children:e.jsx(k,{className:"w-6 h-6 text-white ml-1"})})}),e.jsx("div",{className:"absolute top-2 right-2 bg-red-600 rounded px-2 py-1",children:e.jsx(p,{className:"w-4 h-4 text-white"})})]}):e.jsx("div",{className:"w-full aspect-video bg-gradient-to-br from-red-600/20 to-red-800/20 rounded-lg flex items-center justify-center cursor-pointer hover:from-red-600/30 hover:to-red-800/30 transition-colors youtube-thumbnail",onClick:g,children:e.jsxs("div",{className:"text-center youtube-play-button",children:[e.jsx(p,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("span",{className:"text-white text-sm",children:"유튜브 비디오"})]})})}),u&&A.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 backdrop-blur-sm p-6 md:p-8 lg:p-12",onClick:a=>{a.target===a.currentTarget&&r(a)},children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>r(),className:"absolute top-6 right-6 md:top-8 md:right-8 lg:top-12 lg:right-12 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"닫기",children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsx(y,{variant:"travel",className:"w-full max-w-5xl mx-auto my-8 md:my-12 lg:my-16 mb-12 md:mb-16 lg:mb-20",withWaveEffect:!0,onClick:a=>{a.stopPropagation()},children:e.jsxs("div",{className:"space-y-6 p-2 md:p-4 lg:p-6 pb-4 md:pb-6 lg:pb-8",children:[s&&e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(p,{className:"w-5 h-5 text-red-500"}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:s})]}),e.jsx("div",{className:"relative w-full aspect-video bg-black rounded-xl overflow-hidden shadow-2xl",children:h?e.jsx("iframe",{src:`${n}${n.includes("?")?"&":"?"}autoplay=1&rel=0&modestbranding=1&playsinline=1&enablejsapi=1`,title:s||"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"}):e.jsx("div",{className:"relative w-full h-full",children:x?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:x,alt:s||"유튜브 비디오",className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer group youtube-play-button",onClick:f,"data-youtube-embed":!0,children:e.jsx("div",{className:"bg-red-600 rounded-full p-6 group-hover:bg-red-700 transition-all transform group-hover:scale-110",children:e.jsx(k,{className:"w-12 h-12 text-white ml-1"})})}),e.jsx("div",{className:"absolute bottom-4 right-4",children:e.jsxs("div",{className:"bg-red-600 px-2 py-1 rounded flex items-center space-x-1",children:[e.jsx(p,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-white text-sm font-medium",children:"YouTube"})]})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center cursor-pointer youtube-play-button",onClick:f,"data-youtube-embed":!0,children:[e.jsx("div",{className:"bg-red-600 rounded-full p-6 hover:bg-red-700 transition-colors",children:e.jsx(p,{className:"w-12 h-12 text-white"})}),e.jsx("span",{className:"text-white text-sm mt-2 block",children:"비디오 재생"})]})})})}),e.jsxs("div",{className:"flex items-center justify-between text-white/70 text-sm mt-8 pt-6 pb-4 border-t border-white/10",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{children:"YouTube에서 재생 중"})]}),e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-white transition-colors bg-white/5 hover:bg-white/10 px-3 py-2 rounded-lg",onClick:a=>a.stopPropagation(),children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:"YouTube에서 보기"})]})]})]})})]}),document.body)]})},H=t=>{switch(t){case"attraction":return e.jsx(B,{className:"w-5 h-5"});case"restaurant":return e.jsx(q,{className:"w-5 h-5"});case"hotel":return e.jsx(W,{className:"w-5 h-5"});case"transport":return e.jsx(_,{className:"w-5 h-5"});case"car":return e.jsx(_,{className:"w-5 h-5"});case"plane":return e.jsx(G,{className:"w-5 h-5"});case"airport":return e.jsx(F,{className:"w-5 h-5"});case"other":return e.jsx(v,{className:"w-5 h-5"});default:return e.jsx(v,{className:"w-5 h-5"})}},J=t=>{switch(t){case"attraction":return"text-travel-orange";case"restaurant":return"text-travel-green";case"hotel":return"text-travel-purple";case"transport":return"text-travel-blue";case"car":return"text-travel-blue";case"plane":return"text-travel-blue";case"airport":return"text-travel-blue";case"other":return"text-white/80";default:return"text-white/80"}},O=t=>{switch(t){case"attraction":return"관광지";case"restaurant":return"음식점";case"hotel":return"숙소";case"transport":return"대중교통";case"car":return"자동차";case"plane":return"비행기";case"airport":return"공항";case"other":return"기타";default:return"기타"}},te=({plan:t,onClick:s,onEdit:l,onDelete:c,className:d,showActions:o=!0,...u})=>{const[m,h]=b.useState(!1),[i,n]=b.useState(0),x=r=>r.slice(0,5),g=r=>{const a=r.target;a.closest(".action-button")||a.closest("[data-youtube-embed]")||a.closest("[data-photo-modal]")||a.closest("iframe")||a.closest(".youtube-thumbnail")||a.closest(".youtube-play-button")||s?.(r)},f=(r,a)=>{r.stopPropagation(),n(a),h(!0)};return e.jsxs(y,{variant:"light",hoverable:!!s,className:N("cursor-pointer group transition-all duration-300","hover:border-primary-300/40 hover:shadow-lg hover:shadow-primary-500/10","border border-white/10",d),onClick:g,...u,children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:N("flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center","bg-gradient-to-br from-white/10 to-white/5 border border-white/20",J(t.type)),children:H(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-white truncate group-hover:text-primary-300 transition-colors",children:t.place_name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:N("text-xs px-2 py-1 rounded-full border","bg-white/5 border-white/20 text-white/70"),children:O(t.type)}),o&&(l||c)&&e.jsxs("div",{className:"flex items-center space-x-1 opacity-80 sm:opacity-60 sm:group-hover:opacity-100 transition-opacity",children:[l&&e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),l()},className:"action-button p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/40 transition-colors","aria-label":"일정 편집",children:e.jsx(S,{className:"w-3 h-3 text-blue-300"})}),c&&e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),window.confirm("이 일정을 삭제하시겠습니까?")&&c()},className:"action-button p-2 rounded-lg bg-red-500/20 hover:bg-red-500/40 transition-colors","aria-label":"일정 삭제",children:e.jsx(U,{className:"w-3 h-3 text-red-300"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-white/80 mb-3",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[x(t.start_time),t.end_time&&` ~ ${x(t.end_time)}`]})]}),t.opening_hours&&e.jsxs("div",{className:"flex items-center space-x-2 text-white/80 mb-2",children:[e.jsx(C,{className:"w-4 h-4 text-travel-green"}),e.jsx("span",{className:"text-sm",children:t.opening_hours})]}),t.photos&&t.photos.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-travel-orange",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[t.photos.length,"장의 사진"]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:t.photos.slice(0,4).map((r,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:`${t.place_name} 사진 ${a+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105 cursor-pointer",onClick:w=>f(w,a)}),a===3&&t.photos&&t.photos.length>4&&e.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-lg flex items-center justify-center cursor-pointer hover:bg-black/70 transition-colors",onClick:w=>f(w,a),children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",t.photos.length-4]})})]},a))})]}),t.youtube_link&&e.jsx("div",{className:"mt-3 mb-4",children:e.jsx(X,{url:t.youtube_link,title:`${t.place_name} 비디오`,className:"w-full"})}),e.jsxs("div",{className:`flex items-center justify-between ${t.youtube_link?"mt-2":"mt-4"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t.latitude&&t.longitude&&e.jsxs("div",{className:"flex items-center space-x-1 text-travel-blue",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-xs text-white/60",children:[Number(t.latitude).toFixed(4),", ",Number(t.longitude).toFixed(4)]})]}),t.map_url&&!t.latitude&&!t.longitude&&e.jsxs("div",{className:"flex items-center space-x-1 text-yellow-400",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"지도 링크만 있음"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t.website&&e.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),className:"flex items-center space-x-1 text-travel-purple hover:text-travel-purple/80 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"홈페이지"})]}),t.youtube_link&&e.jsxs("a",{href:t.youtube_link,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),className:"flex items-center space-x-1 text-travel-orange hover:text-travel-orange/80 transition-colors",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"유튜브"})]}),t.map_url&&e.jsxs("a",{href:t.map_url,target:"_blank",rel:"noopener noreferrer",onClick:r=>r.stopPropagation(),className:"flex items-center space-x-1 text-travel-green hover:text-travel-green/80 transition-colors",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:(()=>{const r=t.map_url.toLowerCase();return r.includes("google.com")||r.includes("goo.gl")?"Google지도":r.includes("naver.com")?"Naver지도":r.includes("kakao.com")?"Kakao지도":r.includes("apple.com")?"Apple지도":"지도"})()})]})]})]})]})]}),t.photos&&t.photos.length>0&&e.jsx(V,{photos:t.photos,isOpen:m,onClose:()=>h(!1),initialIndex:i,placeName:t.place_name})]})};export{te as P,A as r};
//# sourceMappingURL=PlanCard-DfMsfTYU.js.map
