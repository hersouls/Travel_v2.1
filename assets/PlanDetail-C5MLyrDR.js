import{l as me,u as he,a as pe,m as xe,j as e,G as w,W as j,H as fe,n as J,g as P,d as S,r as ge,s as be,h as ve,i as Ne,T,x as O,b as we}from"./index-qCsHU5cu.js";import{r as N,A as je,k as ye,l as Q,G as _e,m as ke,X as Z,i as Me,f as G,Y as Ce,M as De,n as Re,o as Pe,p as Se,B as Ue,q as $e,g as Le,N as Fe}from"./ui-DVQGuqmb.js";import{u as Te}from"./navigationCallback-Dv4a5ajJ.js";import{F as Ge}from"./Footer-BdqaH0Mx.js";import{a as Ae,g as Ee,b as ze}from"./time-Ctdjibtq.js";import"./vendor-gH-7aFTg.js";class te{static parseMapUrl(i){if(!i||typeof i!="string")return{success:!1,error:"Invalid URL"};try{const a=i.trim();if(a.includes("maps.apple.com")){const m=this.parseAppleMaps(a);if(m.success)return m}if(a.includes("naver.com")){const m=this.parseNaverMap(a);if(m.success)return m}if(a.includes("kakao.com")){const m=this.parseKakaoMap(a);if(m.success)return m}if(a.includes("google.com")||a.includes("goo.gl")){const m=this.parseGoogleMaps(a);if(m.success)return m}const d=this.parseGoogleMaps(a);if(d.success)return d;const n=this.parseNaverMap(a);if(n.success)return n;const u=this.parseKakaoMap(a);if(u.success)return u;const h=this.parseAppleMaps(a);if(h.success)return h;const y=this.parseGenericCoordinates(a);return y.success?y:{success:!1,error:"Unsupported map URL format"}}catch(a){return{success:!1,error:`Parsing failed: ${a}`}}}static parseGoogleMaps(i){const a=[/@(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]q=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]ll=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]center=(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const d of a){const n=i.match(d);if(n){const u=parseFloat(n[1]),h=parseFloat(n[2]);if(this.isValidCoordinate(u,h))return{success:!0,coordinates:{latitude:u,longitude:h},source:"Google Maps"}}}return{success:!1,error:"Google Maps coordinates not found"}}static parseNaverMap(i){const a=[/[?&]c=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/naver\.com.*?(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const d of a){const n=i.match(d);if(n){const u=parseFloat(n[1]),h=parseFloat(n[2]);if(this.isValidCoordinate(h,u))return{success:!0,coordinates:{latitude:h,longitude:u},source:"Naver Map"}}}return{success:!1,error:"Naver Map coordinates not found"}}static parseKakaoMap(i){const a=[/[?&]urlX=(-?\d+\.?\d*).*?[?&]urlY=(-?\d+\.?\d*)/,/\/map\/[^,]*,(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const d of a){const n=i.match(d);if(n){let u,h;if(d.source.includes("urlX")?(h=parseFloat(n[1]),u=parseFloat(n[2])):(u=parseFloat(n[1]),h=parseFloat(n[2])),this.isValidCoordinate(u,h))return{success:!0,coordinates:{latitude:u,longitude:h},source:"Kakao Map"}}}return{success:!1,error:"Kakao Map coordinates not found"}}static parseAppleMaps(i){const a=[/[?&]ll=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]q=(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const d of a){const n=i.match(d);if(n){const u=parseFloat(n[1]),h=parseFloat(n[2]);if(this.isValidCoordinate(u,h))return{success:!0,coordinates:{latitude:u,longitude:h},source:"Apple Maps"}}}return{success:!1,error:"Apple Maps coordinates not found"}}static parseGenericCoordinates(i){const a=[/latitude=(-?\d+\.?\d*).*?longitude=(-?\d+\.?\d*)/,/lat=(-?\d+\.?\d*).*?lng=(-?\d+\.?\d*)/,/(-?\d{1,3}\.\d{4,}),(-?\d{1,3}\.\d{4,})/];for(const d of a){const n=i.match(d);if(n){const u=parseFloat(n[1]),h=parseFloat(n[2]);if(this.isValidCoordinate(u,h))return{success:!0,coordinates:{latitude:u,longitude:h},source:"Generic"}}}return{success:!1,error:"Generic coordinates not found"}}static isValidCoordinate(i,a){return!isNaN(i)&&!isNaN(a)&&i>=-90&&i<=90&&a>=-180&&a<=180}static coordinatesToGoogleMapsUrl(i){const{latitude:a,longitude:d}=i;return`https://maps.google.com/?q=${a},${d}`}static coordinatesToNaverMapUrl(i){const{latitude:a,longitude:d}=i;return`https://map.naver.com/v5/?c=${d},${a},15`}static formatCoordinates(i){return{lat:i.latitude.toFixed(6),lng:i.longitude.toFixed(6)}}static calculateDistance(i,a){const n=this.toRadians(a.latitude-i.latitude),u=this.toRadians(a.longitude-i.longitude),h=this.toRadians(i.latitude),y=this.toRadians(a.latitude),m=Math.sin(n/2)*Math.sin(n/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(h)*Math.cos(y);return 6371*(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)))}static toRadians(i){return i*(Math.PI/180)}}const ee=b=>te.parseMapUrl(b),U=b=>te.formatCoordinates(b),We=()=>{const{tripId:b,planId:i}=me(),{user:a}=he(),d=pe(),[n]=xe(),{hasCallback:u,executeCallback:h,handleErrorWithCallback:y}=Te(n),[m,A]=N.useState(null),[k,se]=N.useState(!1),[ae,M]=N.useState(!0),[$,E]=N.useState(!1),[C,f]=N.useState(null),[t,p]=N.useState({day:parseInt(n.get("day")||"1"),place_name:"",start_time:"09:00",end_time:"10:00",type:"attraction",address:"",website:"",opening_hours:"",memo:"",youtube_link:"",map_url:"",latitude:"",longitude:""}),[D,z]=N.useState([]),[B,q]=N.useState([]),[_,I]=N.useState([]),[g,L]=N.useState(null),[re,R]=N.useState(!1),V=[{value:"attraction",label:"관광지",icon:e.jsx(Pe,{className:"w-4 h-4 inline mr-1 text-travel-orange"})},{value:"restaurant",label:"음식점",icon:e.jsx(Se,{className:"w-4 h-4 inline mr-1 text-travel-green"})},{value:"hotel",label:"숙소",icon:e.jsx(Ue,{className:"w-4 h-4 inline mr-1 text-travel-purple"})},{value:"transport",label:"대중교통",icon:e.jsx(G,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"car",label:"자동차",icon:e.jsx($e,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"plane",label:"비행기",icon:e.jsx(Le,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"airport",label:"공항",icon:e.jsx(Fe,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"other",label:"기타",icon:e.jsx(G,{className:"w-4 h-4 inline mr-1 text-white/80"})}];N.useEffect(()=>{if(!b||!a)return;(async()=>{try{const r=await J(P(S,"trips",b));if(!r.exists()){f("여행을 찾을 수 없습니다."),M(!1);return}const c={id:r.id,...r.data()};if(c.user_id!==a.uid){f("접근 권한이 없습니다."),M(!1);return}if(A(c),i){se(!0);const o=await J(P(S,"plans",i));if(o.exists()){const l={id:o.id,...o.data()};p({day:l.day,place_name:l.place_name,start_time:l.start_time,end_time:l.end_time||"",type:l.type,address:l.address||"",website:l.website||"",opening_hours:l.opening_hours||"",memo:l.memo||"",youtube_link:l.youtube_link||"",map_url:l.map_url||"",latitude:l.latitude?.toString()||"",longitude:l.longitude?.toString()||""}),I(l.photos||[])}}M(!1)}catch(r){console.error("데이터 로딩 실패:",r),f("데이터를 불러오는데 실패했습니다."),M(!1)}})()},[b,i,a]);const le=s=>{const r=Array.from(s.target.files||[]);if(D.length+_.length+r.length>5){f("사진은 최대 5장까지 업로드할 수 있습니다.");return}r.forEach(o=>{if(o.size>5*1024*1024){f("각 이미지는 5MB를 초과할 수 없습니다.");return}}),z(o=>[...o,...r]),r.forEach(o=>{const l=new FileReader;l.onload=x=>{q(v=>[...v,x.target?.result])},l.readAsDataURL(o)}),f(null)},K=(s,r=!1)=>{r?I(c=>c.filter((o,l)=>l!==s)):(z(c=>c.filter((o,l)=>l!==s)),q(c=>c.filter((o,l)=>l!==s)))},Y=s=>{if(!s.trim()){L(null),R(!1);return}const r=ee(s);if(L(r),R(!0),r.success&&r.coordinates){const c=U(r.coordinates);p(o=>({...o,latitude:c.lat,longitude:c.lng}))}setTimeout(()=>{R(!1)},3e3)},ie=s=>{p(r=>({...r,map_url:s})),window.mapUrlParseTimeout&&clearTimeout(window.mapUrlParseTimeout),window.mapUrlParseTimeout=setTimeout(()=>{s.trim()&&s.includes(".")&&Y(s)},500)},ne=()=>{t.map_url.trim()&&Y(t.map_url)},oe=()=>{p(s=>({...s,latitude:"",longitude:""})),L(null),R(!1)},W=()=>{u?h(d):d(`/trips/${b}`)},ce=()=>{if(!m)return Array.from({length:10},(x,v)=>v+1);const s=new Date(m.start_date),r=new Date(m.end_date),c=Math.abs(r.getTime()-s.getTime()),o=Math.ceil(c/(1e3*60*60*24))+1,l=Math.min(Math.max(1,o),30);return Array.from({length:l},(x,v)=>v+1)},H=s=>{if(!m)return`Day ${s}`;const r=Ae(m.start_date,s-1),{year:c,month:o,day:l}=Ee(r),x=String(o).padStart(2,"0"),v=String(l).padStart(2,"0"),F=["일","월","화","수","목","금","토"][ze(r)];return`Day ${s} (${c}.${x}.${v}.${F})`},de=()=>t.place_name.trim()?t.start_time?t.end_time&&t.start_time>=t.end_time?(f("종료 시간은 시작 시간보다 늦어야 합니다."),!1):t.memo.length>1e3?(f("메모는 1000자를 초과할 수 없습니다."),!1):t.latitude&&(isNaN(Number(t.latitude))||Number(t.latitude)<-90||Number(t.latitude)>90)?(f("위도는 -90에서 90 사이의 숫자여야 합니다."),!1):t.longitude&&(isNaN(Number(t.longitude))||Number(t.longitude)<-180||Number(t.longitude)>180)?(f("경도는 -180에서 180 사이의 숫자여야 합니다."),!1):!0:(f("시작 시간을 선택해주세요."),!1):(f("장소명을 입력해주세요."),!1),ue=async s=>{if(s.preventDefault(),!(!a||!m||!de())){E(!0),f(null);try{const r=[];for(const x of D){const v=ge(be,`plan-photos/${a.uid}/${Date.now()}_${x.name}`),X=await ve(v,x),F=await Ne(X.ref);r.push(F)}let c=t.latitude,o=t.longitude;if(t.map_url.trim()&&(!t.latitude||!t.longitude)){const x=ee(t.map_url.trim());if(x.success&&x.coordinates){const v=U(x.coordinates);c=v.lat,o=v.lng,console.log(`🗺️ 지도 URL에서 좌표 자동 추출: ${x.source} (${c}, ${o})`)}}const l={trip_id:b,day:t.day,place_name:t.place_name.trim(),start_time:t.start_time,type:t.type,photos:[..._,...r],created_at:T.now(),updated_at:T.now()};if(t.end_time&&(l.end_time=t.end_time),t.address.trim()&&(l.address=t.address.trim()),t.website.trim()&&(l.website=t.website.trim()),t.opening_hours.trim()&&(l.opening_hours=t.opening_hours.trim()),t.memo.trim()&&(l.memo=t.memo.trim()),t.youtube_link.trim()&&(l.youtube_link=t.youtube_link.trim()),t.map_url.trim()&&(l.map_url=t.map_url.trim()),c&&!isNaN(Number(c))&&(l.latitude=Number(c)),o&&!isNaN(Number(o))&&(l.longitude=Number(o)),k&&i)await O(P(S,"plans",i),{...l,updated_at:T.now()});else{const x=P(we(S,"plans"));await O(x,l)}W()}catch(r){console.error("일정 저장 실패:",r),f("일정 저장에 실패했습니다. 다시 시도해주세요."),y(d,{delay:3e3,fallbackPath:`/trips/${b}`,preserveErrorState:!1})}finally{E(!1)}}};return ae?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})}):C&&!m?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs(w,{variant:"travel",className:"text-center",children:[e.jsx("p",{className:"text-white mb-4",children:C}),e.jsx(j,{onClick:()=>d("/"),children:"Back to Home"})]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(fe,{}),e.jsx("div",{className:"pt-20 px-4 pb-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(j,{variant:"ghost",size:"sm",onClick:W,className:"flex items-center space-x-2",ariaLabel:"Back to trip details",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white text-glow text-center flex-1",children:k?"일정 편집":"새 일정 추가"}),e.jsx("div",{className:"w-20 sm:w-24"})]}),m&&e.jsxs(w,{variant:"light",className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:m.title}),e.jsxs("p",{className:"text-white/60",children:[H(t.day)," 일정"]})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[e.jsxs(w,{variant:"travel",className:"animate-fade-in",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"기본 정보"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Day *"}),e.jsx("select",{value:t.day,onChange:s=>p({...t,day:parseInt(s.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all",children:ce().map(s=>e.jsx("option",{value:s,className:"bg-primary-800",children:H(s)},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"유형 *"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:t.type,onChange:s=>p({...t,type:s.target.value}),className:"w-full px-12 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all appearance-none",children:V.map(s=>e.jsx("option",{value:s.value,className:"bg-primary-800",children:s.label},s.value))}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:V.find(s=>s.value===t.type)?.icon})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"장소명 *"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:t.place_name,onChange:s=>p({...t,place_name:s.target.value}),placeholder:"예: 도쿄 스카이트리",className:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"}),e.jsxs(j,{type:"button",variant:"ghost",onClick:()=>d(`/places/search?trip=${b}`),className:"!p-3 sm:!p-3 w-full sm:w-auto",ariaLabel:"장소 검색",children:[e.jsx(ye,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-2 sm:hidden",children:"장소 검색"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"주소"}),e.jsx("input",{type:"text",value:t.address,onChange:s=>p({...t,address:s.target.value}),placeholder:"예: 도쿄도 스미다구 오시아게 1-1-2",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[e.jsx(Q,{className:"w-4 h-4 inline mr-1"}),"시작 시간 *"]}),e.jsx("input",{type:"time",value:t.start_time,onChange:s=>p({...t,start_time:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"종료 시간"}),e.jsx("input",{type:"time",value:t.end_time,onChange:s=>p({...t,end_time:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]})]})]})]}),e.jsxs(w,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"상세 정보"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[e.jsx(_e,{className:"w-4 h-4 inline mr-2"}),"홈페이지"]}),e.jsx("input",{type:"url",value:t.website,onChange:s=>p({...t,website:s.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-travel-blue focus:ring-1 focus:ring-travel-blue"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[e.jsx(Q,{className:"w-4 h-4 inline mr-2"}),"영업 시간"]}),e.jsx("input",{type:"text",value:t.opening_hours,onChange:s=>p({...t,opening_hours:s.target.value}),placeholder:"예: 월-금 09:00-18:00, 토요일 휴무",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-travel-blue focus:ring-1 focus:ring-travel-blue"})]})]})]}),e.jsxs(w,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:[e.jsx(ke,{className:"w-5 h-5 inline mr-2"}),"사진 (",_.length+D.length,"/5)"]}),_.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 mb-4",children:_.map((s,r)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`사진 ${r+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105"}),e.jsx(j,{type:"button",onClick:()=>K(r,!0),variant:"secondary",size:"sm",className:"absolute top-1 right-1 !p-1 !px-1 !py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",ariaLabel:"사진 삭제",children:e.jsx(Z,{className:"w-3 h-3"})})]},r))}),B.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 mb-4",children:B.map((s,r)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`새 사진 ${r+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105"}),e.jsx(j,{type:"button",onClick:()=>K(r),variant:"secondary",size:"sm",className:"absolute top-1 right-1 !p-1 !px-1 !py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",ariaLabel:"사진 삭제",children:e.jsx(Z,{className:"w-3 h-3"})})]},r))}),_.length+D.length<5&&e.jsxs("label",{className:"block w-full h-20 border-2 border-dashed border-white/30 rounded-lg cursor-pointer hover:border-white/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[e.jsx(Me,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-sm",children:"사진 추가"})]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:le,className:"hidden"})]})]}),e.jsxs(w,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e.jsx(G,{className:"w-5 h-5 inline mr-2"}),"위치 정보"]}),(t.latitude||t.longitude)&&e.jsx(j,{type:"button",onClick:oe,variant:"ghost",size:"sm",className:"text-xs text-red-300 hover:text-red-200 hover:bg-red-500/20",ariaLabel:"좌표 초기화",children:"초기화"})]}),g?.success&&e.jsx("div",{className:"mb-4 p-3 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-200 text-sm",children:[e.jsx("span",{className:"text-blue-400",children:"ℹ"}),e.jsx("span",{children:"지도 URL에서 자동 추출된 좌표입니다"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:["위도 (Latitude)",e.jsx("span",{className:"text-xs text-white/60 ml-1",children:"(-90 ~ 90)"})]}),e.jsx("input",{type:"text",value:t.latitude,onChange:s=>p({...t,latitude:s.target.value}),placeholder:"예: 35.710063",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/50 focus:outline-none transition-all ${g?.success&&g.coordinates?"border-blue-400/50 focus:border-blue-300 focus:ring-1 focus:ring-blue-300":"border-white/20 focus:border-primary-300 focus:ring-1 focus:ring-primary-300"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:["경도 (Longitude)",e.jsx("span",{className:"text-xs text-white/60 ml-1",children:"(-180 ~ 180)"})]}),e.jsx("input",{type:"text",value:t.longitude,onChange:s=>p({...t,longitude:s.target.value}),placeholder:"예: 139.810700",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/50 focus:outline-none transition-all ${g?.success&&g.coordinates?"border-blue-400/50 focus:border-blue-300 focus:ring-1 focus:ring-blue-300":"border-white/20 focus:border-primary-300 focus:ring-1 focus:ring-primary-300"}`})]})]}),(t.latitude||t.longitude)&&e.jsx("div",{className:"mt-3",children:(()=>{const s=parseFloat(t.latitude),r=parseFloat(t.longitude),c=!isNaN(s)&&s>=-90&&s<=90,o=!isNaN(r)&&r>=-180&&r<=180;return t.latitude&&t.longitude?c&&o?e.jsxs("div",{className:"flex items-center space-x-2 text-green-200 text-xs",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsx("span",{children:"유효한 좌표입니다"})]}):e.jsxs("div",{className:"flex items-center space-x-2 text-red-200 text-xs",children:[e.jsx("span",{className:"text-red-400",children:"✗"}),e.jsxs("span",{children:[!c&&"위도가 유효하지 않습니다 ",!o&&"경도가 유효하지 않습니다"]})]}):null})()})]}),e.jsxs(w,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"링크"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 inline mr-1"}),"YouTube 링크"]}),e.jsx("input",{type:"url",value:t.youtube_link,onChange:s=>p({...t,youtube_link:s.target.value}),placeholder:"https://youtube.com/watch?v=...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[e.jsx(De,{className:"w-4 h-4 inline mr-1"}),"지도 링크",e.jsx("span",{className:"text-xs text-white/60 ml-2",children:"(Google Maps, Naver, Kakao 지원)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"url",value:t.map_url,onChange:s=>ie(s.target.value),placeholder:"https://maps.google.com/... 또는 https://map.naver.com/...",className:"w-full px-4 py-3 pr-24 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"}),t.map_url.trim()&&e.jsx(j,{type:"button",onClick:ne,variant:"ghost",size:"sm",className:"absolute right-1 top-1 bottom-1 px-2 bg-primary-500/20 hover:bg-primary-500/40 text-xs",ariaLabel:"좌표 추출",children:"파싱"})]}),re&&g&&e.jsx("div",{className:`mt-2 p-3 rounded-lg text-sm ${g.success?"bg-green-500/20 border border-green-500/30 text-green-200":"bg-red-500/20 border border-red-500/30 text-red-200"}`,children:g.success?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsx("span",{className:"font-medium",children:"좌표 추출 성공!"}),g.source&&e.jsx("span",{className:"text-xs bg-green-500/30 px-2 py-1 rounded-full",children:g.source})]}),g.coordinates&&e.jsxs("div",{className:"text-xs text-green-300",children:["위도: ",U(g.coordinates).lat,", 경도: ",U(g.coordinates).lng]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-red-400",children:"✗"}),e.jsx("span",{className:"font-medium",children:"좌표 추출 실패"})]}),e.jsx("div",{className:"text-xs text-red-300",children:g.error})]})})]})]})]}),e.jsxs(w,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"메모"}),e.jsx("textarea",{value:t.memo,onChange:s=>p({...t,memo:s.target.value}),placeholder:"이 장소에 대한 메모를 작성해주세요...",maxLength:1e3,rows:4,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 resize-none transition-all"}),e.jsxs("div",{className:"text-xs text-white/60 mt-1 text-right",children:[t.memo.length,"/1000자"]})]}),C&&e.jsx("div",{className:"bg-red-500/20 border border-red-400/30 rounded-xl p-4",children:e.jsx("p",{className:"text-red-200 text-sm text-center",children:C})}),e.jsx("div",{className:"sticky bottom-6 z-10",children:e.jsx(j,{type:"submit",variant:"travel",size:"lg",className:"w-full animate-fade-in shadow-lg",style:{animationDelay:"0.6s"},disabled:$,ariaLabel:$?"저장 중":k?"일정 수정하기":"일정 추가하기",children:$?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),e.jsx("span",{children:"저장 중..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 mr-2"}),k?"수정하기":"추가하기"]})})})]})]})}),e.jsx(Ge,{})]})};export{We as PlanDetail};
//# sourceMappingURL=PlanDetail-C5MLyrDR.js.map
