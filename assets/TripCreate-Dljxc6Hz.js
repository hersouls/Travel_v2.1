import{u as T,a as E,j as e,H as F,G as c,W as j,r as M,s as B,h as U,i as W,T as N,k as P,b as A,d as G}from"./index-DZW4yAKh.js";import{r as n,X as H,i as K,f as X,C as h}from"./ui-DVQGuqmb.js";import{F as q}from"./Footer-BGsSFsx0.js";import"./vendor-gH-7aFTg.js";const Y=()=>{const{user:d}=T(),y=E(),[t,o]=n.useState({title:"",country:"",start_date:"",end_date:""}),[m,p]=n.useState(null),[f,g]=n.useState(null),[u,b]=n.useState(!1),[w,l]=n.useState(null),v=a=>{if(!a)return"";const[s,r,i]=a.split("-"),x=new Date(Number(s),Number(r)-1,Number(i)),L=["일","월","화","수","목","금","토"][x.getDay()],I=r.padStart(2,"0"),R=i.padStart(2,"0");return`${s}.${I}.${R}.${L}`},_=["대한민국","일본","중국","미국","영국","프랑스","독일","이탈리아","스페인","캐나다","호주","태국","베트남","싱가포르","말레이시아","인도네시아","필리핀","인도","브라질","아르헨티나","기타"],D=a=>{const s=a.target.files?.[0];if(s){if(s.size>5*1024*1024){l("이미지 크기는 5MB를 초과할 수 없습니다.");return}p(s);const r=new FileReader;r.onload=i=>{g(i.target?.result)},r.readAsDataURL(s),l(null)}},z=()=>{p(null),g(null)},C=()=>{if(t.start_date&&t.end_date){const a=new Date(t.start_date),s=new Date(t.end_date),r=Math.abs(s.getTime()-a.getTime());return Math.ceil(r/(1e3*60*60*24))+1}return 0},S=()=>t.title.trim()?t.title.length<2||t.title.length>60?(l("여행 제목은 2-60자 사이여야 합니다."),!1):t.country?!t.start_date||!t.end_date?(l("여행 날짜를 선택해주세요."),!1):new Date(t.start_date)>new Date(t.end_date)?(l("시작 날짜가 종료 날짜보다 늦을 수 없습니다."),!1):!0:(l("국가를 선택해주세요."),!1):(l("여행 제목을 입력해주세요."),!1),$=async a=>{if(a.preventDefault(),!(!d||!S())){b(!0),l(null);try{let s="";if(m){const x=M(B,`trip-covers/${d.uid}/${Date.now()}_${m.name}`),k=await U(x,m);s=await W(k.ref)}const r={user_id:d.uid,title:t.title.trim(),country:t.country,start_date:t.start_date,end_date:t.end_date,plans_count:0,created_at:N.now(),updated_at:N.now()};s&&(r.cover_image=s);const i=await P(A(G,"trips"),r);y(`/trips/${i.id}`)}catch(s){console.error("여행 생성 실패:",s),l("여행 생성에 실패했습니다. 다시 시도해주세요.")}finally{b(!1)}}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(F,{}),e.jsx("div",{className:"pt-20 px-4 pb-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6 animate-fade-in",children:[e.jsx("h1",{className:"text-2xl-ko md:text-3xl-ko lg:text-4xl-ko xl:text-5xl-ko font-bold text-white moonwave-glow break-keep-ko",children:"새 여행 만들기"}),e.jsx("p",{className:"text-sm-ko md:text-base-ko lg:text-lg-ko xl:text-xl-ko text-white/60 mt-2 tracking-ko-normal",children:"특별한 여행의 시작을 계획해보세요"})]}),e.jsxs("form",{onSubmit:$,className:"w-full space-y-6",children:[e.jsxs(c,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[e.jsx("h3",{className:"text-lg-ko font-semibold text-white mb-4 tracking-ko-normal",children:"커버 이미지"}),f?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:f,alt:"커버 이미지 미리보기",className:"w-full h-40 md:h-48 lg:h-56 object-cover rounded-xl"}),e.jsx(j,{type:"button",onClick:z,variant:"secondary",size:"sm",className:"absolute top-2 right-2 !p-2 !px-2 !py-2 rounded-full",ariaLabel:"이미지 삭제",children:e.jsx(H,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"block w-full h-40 md:h-48 lg:h-56 border-2 border-dashed border-white/30 rounded-xl cursor-pointer hover:border-white/50 transition-colors touch-optimized wave-float",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[e.jsx(K,{className:"w-8 h-8 mb-2 wave-pulse"}),e.jsx("span",{className:"text-sm-ko tracking-ko-normal",children:"이미지 업로드"}),e.jsx("span",{className:"text-xs-ko mt-1 text-white/40",children:"최대 5MB"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]})]}),e.jsx(c,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.2s"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"여행 제목 *"}),e.jsx("input",{type:"text",value:t.title,onChange:a=>o({...t,title:a.target.value}),placeholder:"예: 도쿄 벚꽃 여행",maxLength:60,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all"}),e.jsxs("div",{className:"text-xs-ko text-white/60 mt-1 text-numeric",children:[t.title.length,"/60자"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[e.jsx(X,{className:"w-4 h-4 inline mr-1"}),"국가 *"]}),e.jsxs("select",{value:t.country,onChange:a=>o({...t,country:a.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all",children:[e.jsx("option",{value:"",disabled:!0,children:"국가를 선택해주세요"}),_.map(a=>e.jsx("option",{value:a,className:"bg-primary-800 text-base-ko",children:a},a))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[e.jsx(h,{className:"w-4 h-4 inline mr-1"}),"시작일 *"]}),e.jsx("input",{type:"date",value:t.start_date,onChange:a=>o({...t,start_date:a.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),t.start_date&&e.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:v(t.start_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"종료일 *"}),e.jsx("input",{type:"date",value:t.end_date,onChange:a=>o({...t,end_date:a.target.value}),min:t.start_date,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),t.end_date&&e.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:v(t.end_date)})]})]}),t.start_date&&t.end_date&&e.jsx(c,{variant:"light",className:"animate-fade-in moonwave-glow",children:e.jsxs("p",{className:"text-white text-sm-ko text-center tracking-ko-normal",children:[e.jsx(h,{className:"w-4 h-4 inline mr-1"}),"총 ",e.jsxs("span",{className:"font-bold text-travel-blue text-numeric",children:[C(),"일"]})," 여행"]})})]})}),w&&e.jsx(c,{variant:"strong",className:"animate-fade-in wave-pulse",children:e.jsx("p",{className:"text-error-foreground text-sm-ko text-center tracking-ko-normal break-keep-ko",children:w})}),e.jsx(j,{type:"submit",variant:"travel",size:"lg",className:"w-full animate-fade-in touch-optimized wave-optimized group relative overflow-hidden",style:{animationDelay:"0.3s"},disabled:u,ariaLabel:u?"여행 생성 중":"여행 만들기",children:u?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),e.jsx("span",{className:"text-base-ko tracking-ko-normal",children:"여행 생성 중..."})]}):e.jsxs("span",{className:"text-base-ko tracking-ko-normal flex items-center justify-center space-x-2 group-hover:scale-105 transition-transform",children:[e.jsx("span",{children:"여행 만들기"}),e.jsx(h,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"})]})})]})]})}),e.jsx(q,{})]})};export{Y as TripCreate};
//# sourceMappingURL=TripCreate-Dljxc6Hz.js.map
